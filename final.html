<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DAS Medical Chatbot</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #E3DAC9; /* Changed background color */
            font-family: 'Poppins', sans-serif;
            color: #333; /* Changed font color */
            margin: 0; /* Removed default margin */
            padding: 0; /* Removed default padding */
        }
        .chat-container {
            max-width: 800px;
            margin: 50px auto;
            margin-top: 10%;
            padding: 20px;
            background-color: #5072A7; /* Changed background color */
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Added box shadow for depth */
        }
        .chat-heading {
            text-align: center;
            font-size: 2.5em;
            font-weight: 600;
            margin-bottom: 30px;
            color: white; /* Changed font color */
        }
        .chat-input {
            margin-top: 20px;
            margin-bottom: 20px;
            height: 100px;
            resize: none; /* Prevent resizing */
        }
        .chat-button {
            background-color: #007bff; /* Changed button color */
            color: #fff; /* Changed font color */
            padding: 10px 20px;
            font-size: 1.2em;
            border: none; /* Removed default border */
            border-radius: 5px; /* Added border radius */
            cursor: pointer; /* Added cursor pointer */
            transition: background-color 0.3s ease; /* Smooth transition */
        }
        .chat-button:hover {
            background-color: green; /* Darker color on hover */
        }
        .chat-response {
            background-color: #f9f9f9; /* Changed response box background color */
            padding: 15px;
            border-radius: 5px;
            min-height: 100px;
            margin-top: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Added box shadow for depth */
        }
        .accordion {
            margin-top: 20px;
            background-color: blue; /* Changed accordion background color */
            border-radius: 5px;
        }
        .accordion-button {
            color: #333; /* Changed font color */
            background-color: #eee; /* Changed button background color */
        }
        .accordion-body {
            color: #333; /* Changed font color */
        }
        pre {
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container chat-container">
        <h1 class="chat-heading">DAS medhub chatbot assistance</h1>

        <div class="accordion" id="appDescriptionAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header" id="descriptionHeading">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDescription" aria-expanded="true" aria-controls="collapseDescription">
                        About This App
                    </button>
                </h2>
                <div id="collapseDescription" class="accordion-collapse collapse" aria-labelledby="descriptionHeading" data-bs-parent="#appDescriptionAccordion">
                    <div class="accordion-body">                       
The DAS MedHub Chatbot is an advanced medical chatbot designed to assist users with a variety of health-related needs. It provides a comprehensive symptom assessment tool, allowing users to input their symptoms and receive possible diagnoses based on a vast database of medical knowledge. Additionally, it offers reliable information on a wide range of medical conditions, treatments, and medications, empowering users with the knowledge they need to make informed health decisions. The chatbot also provides guidance and recommendations, advising users when to seek medical attention, offering self-care tips, and suggesting over-the-counter remedies. For those needing further assistance, the DAS MedHub Chatbot can help schedule appointments with healthcare providers if integrated with medical services. Furthermore, it supports chronic disease management and follow-up care, helping patients adhere to treatment plans with reminders for medications and appointments, thereby enhancing overall patient support and care continuity.
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <textarea id="userInput" class="form-control chat-input" placeholder="Type your query here..."></textarea>
                <button id="submitBtn" class="btn chat-button">Submit</button>
                <div id="response" class="chat-response"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('submitBtn').addEventListener('click', async function() {
            var userInput = document.getElementById('userInput').value;
            document.getElementById('response').innerHTML = '<p>Processing...</p>';
            const formData = new FormData();
            formData.append('query', userInput); 
            try {
                const response = await fetch('/get_response', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                const data = await response.json();
                document.getElementById('response').innerHTML = `<p>${data.answer}</p><br><pre><b>Context: </b> ${data.source_document}</pre><br><pre><b>Source Document: </b> ${data.doc}</pre>`;
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('response').innerHTML = '<p>Error processing your request</p>';
            }
        });
    </script>
</body>
</html>
